<ui:composition xmlns="http://www.w3.org/1999/xhtml" 
 xmlns:h="http://java.sun.com/jsf/html" 
 xmlns:f="http://java.sun.com/jsf/core" 
 xmlns:c="http://java.sun.com/jsp/jstl/core"
 xmlns:ui="http://java.sun.com/jsf/facelets" 
 xmlns:a4j="http://richfaces.org/a4j" 
 xmlns:rich="http://richfaces.org/rich" 
 template="template.xhtml">
 
	<ui:define name="content">
		<h:body>
		<h2>Vyhledání vozidla podle registrační značky</h2>

		<h:form>
			<h:panelGrid columns="2" styleClass="noborder">
				<rich:autocomplete minChars="1"
		        				   id="suggest"
		                           value="#{policeBean.find}"
		                           execute="@form"
		                           render="out" 
		                           autocompleteMethod="#{policeBean.autocomplete}"/>
		                           
			    <a4j:commandButton render="out" execute="@form" 
		    					   action="#{policeBean.findVozidlo}" value="Vyhledat"/>
			</h:panelGrid>
	        
		    
		    <a4j:outputPanel id="out">
				<h4>Vozidlo</h4>
				<h:dataTable value="#{policeBean.vozidlo}"
				             var="vozidlo">
					<h:column>
						<f:facet name="header">
		                    <h:outputText value="Registrační značka"/>
		                </f:facet>
						<h:outputText value="#{vozidlo.reg}"></h:outputText>
					</h:column>
					<h:column>
						<f:facet name="header">
		                    <h:outputText value="Výrobce"/>
		                </f:facet>
						<h:outputText value="#{vozidlo.prod}"></h:outputText>
					</h:column>
					<h:column>
						<f:facet name="header">
		                    <h:outputText value="Typ"/>
		                </f:facet>
						<h:outputText value="#{vozidlo.type}"></h:outputText>
					</h:column>
					<h:column>
						<f:facet name="header">
							<h:outputText value="Akce"></h:outputText>
						</f:facet>
						<h:commandLink action="#{policeBean.actionHistory(vozidlo)}">
							<h:outputText value="Krádeže"></h:outputText>
						</h:commandLink>
					</h:column>
				</h:dataTable>

				<h4>Majitel</h4>
		    	<h:dataTable value="#{policeBean.vozidlo.owner}" var="osoba">
					<h:column>
						<f:facet name="header">
		                    <h:outputText value="ID"/>
		                </f:facet>
						<h:outputText value="#{osoba.id}"></h:outputText>
					</h:column>
					<h:column>
						<f:facet name="header">
		                    <h:outputText value="Jmeno"/>
		                </f:facet>
						<h:outputText value="#{osoba.jmeno}"></h:outputText>
					</h:column>
					<h:column>
						<f:facet name="header">
		                    <h:outputText value="Prijmeni"/>
		                </f:facet>
						<h:outputText value="#{osoba.prijmeni}"></h:outputText>
					</h:column>
					<h:column>
						<f:facet name="header">
		                    <h:outputText value="Misto narozeni"/>
		                </f:facet>
						<h:outputText value="#{osoba.mistoNarozeni}"></h:outputText>
					</h:column>
					<h:column>
						<f:facet name="header">
		                    <h:outputText value="Bydliste (obec)"/>
		                </f:facet>
						<h:outputText value="#{osoba.bydlisteObec}"></h:outputText>
					</h:column>
					<h:column>
						<f:facet name="header">
							<h:outputText value="Akce"></h:outputText>
						</f:facet>
						<h:commandLink action="#{policeBean.actionPoints(osoba)}">
							<h:outputText value="Bodový systém"></h:outputText>
						</h:commandLink>
					</h:column>
				</h:dataTable>
    		</a4j:outputPanel> 

		</h:form>
		</h:body>
	</ui:define>
</ui:composition>